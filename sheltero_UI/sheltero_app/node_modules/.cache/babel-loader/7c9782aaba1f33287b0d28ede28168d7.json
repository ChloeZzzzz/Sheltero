{"ast":null,"code":"import _slicedToArray from \"/Users/abeishiwo/Documents/2020Study-Sem1/WEBIT[INFO30005]/frontend_functional_components/mylibraryapp-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nvar BASE_URL = \"http://localhost:3000\";\n\nfunction getAuthors() {\n  var endpoint = BASE_URL + \"/author-management\";\n  console.log(\"getAuthors\");\n  return fetch(endpoint).then(function (res) {\n    return res.json();\n  });\n}\n\nexport function getAuthor(id) {\n  var endpoint = BASE_URL + \"/author-management/\".concat(id);\n  console.log(\"getAuthor\");\n  return fetch(endpoint).then(function (res) {\n    console.log(res);\n  });\n}\nexport function addAuthor(author) {\n  var id = author.id,\n      first_name = author.first_name,\n      last_name = author.last_name;\n\n  if (!id || !first_name || !last_name) {\n    alert(\"must include all fields\");\n    return;\n  }\n\n  console.log({\n    first_name: first_name,\n    last_name: last_name\n  });\n  var endpoint = BASE_URL + \"/author-management/\";\n  console.log(\"addAuthor\"); // console.log(author);\n\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      id: id,\n      first_name: first_name,\n      last_name: last_name\n    })\n  }).then(function (res) {\n    return window.location.reload();\n  });\n}\nexport function updateAuthor(author) {\n  var id = author.id,\n      first_name = author.first_name,\n      last_name = author.last_name;\n\n  if (!id) {\n    alert(\"must include an id\");\n    return;\n  }\n\n  if (!first_name || !last_name) {\n    alert(\"must include a first name or last name to update\");\n    return;\n  }\n\n  console.log({\n    first_name: first_name,\n    last_name: last_name\n  });\n  var endpoint = BASE_URL + \"/author-management/\".concat(id);\n  console.log(\"updateAuthor\"); // console.log(author);\n\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      first_name: first_name,\n      last_name: last_name\n    })\n  }).then(function (res) {\n    console.log(res);\n  }).then(function (res) {\n    return window.location.reload();\n  });\n}\nexport function deleteAuthor(id) {\n  var endpoint = BASE_URL + \"/author-management/\".concat(id);\n  console.log(\"deleteAuthor\");\n  return fetch(endpoint, {\n    method: \"DELETE\"\n  }).then(function (res) {\n    return window.location.reload();\n  });\n}\nexport function useAuthors() {\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      authors = _useState4[0],\n      setAuthors = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  useEffect(function () {\n    getAuthors().then(function (authors) {\n      setAuthors(authors);\n      setLoading(false);\n    }).catch(function (e) {\n      console.log(e);\n      setError(e);\n      setLoading(false);\n    });\n  }, []);\n  return {\n    loading: loading,\n    authors: authors,\n    error: error\n  };\n}","map":{"version":3,"sources":["/Users/abeishiwo/Documents/2020Study-Sem1/WEBIT[INFO30005]/frontend_functional_components/mylibraryapp-frontend/src/api.js"],"names":["useState","useEffect","BASE_URL","getAuthors","endpoint","console","log","fetch","then","res","json","getAuthor","id","addAuthor","author","first_name","last_name","alert","method","headers","body","JSON","stringify","window","location","reload","updateAuthor","deleteAuthor","useAuthors","loading","setLoading","authors","setAuthors","error","setError","catch","e"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA,IAAMC,QAAQ,GAAG,uBAAjB;;AAEA,SAASC,UAAT,GAAsB;AACpB,MAAMC,QAAQ,GAAGF,QAAQ,uBAAzB;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,SAAOC,KAAK,CAACH,QAAD,CAAL,CAAgBI,IAAhB,CAAqB,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GAAxB,CAAP;AACD;;AAED,OAAO,SAASC,SAAT,CAAmBC,EAAnB,EAAuB;AAC5B,MAAMR,QAAQ,GAAGF,QAAQ,gCAAyBU,EAAzB,CAAzB;AACAP,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA,SAAOC,KAAK,CAACH,QAAD,CAAL,CAAgBI,IAAhB,CAAqB,UAAAC,GAAG,EAAI;AACjCJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACD,GAFM,CAAP;AAGD;AAED,OAAO,SAASI,SAAT,CAAmBC,MAAnB,EAA2B;AAAA,MACxBF,EADwB,GACME,MADN,CACxBF,EADwB;AAAA,MACpBG,UADoB,GACMD,MADN,CACpBC,UADoB;AAAA,MACRC,SADQ,GACMF,MADN,CACRE,SADQ;;AAEhC,MAAI,CAACJ,EAAD,IAAO,CAACG,UAAR,IAAsB,CAACC,SAA3B,EAAsC;AACpCC,IAAAA,KAAK,CAAC,yBAAD,CAAL;AACA;AACD;;AAEDZ,EAAAA,OAAO,CAACC,GAAR,CAAY;AACVS,IAAAA,UAAU,EAAVA,UADU;AAEVC,IAAAA,SAAS,EAATA;AAFU,GAAZ;AAIA,MAAMZ,QAAQ,GAAGF,QAAQ,wBAAzB;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAZgC,CAahC;;AACA,SAAOC,KAAK,CAACH,QAAD,EAAW;AACrBc,IAAAA,MAAM,EAAE,MADa;AAErBC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFY;AAKrBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBV,MAAAA,EAAE,EAAFA,EADmB;AAEnBG,MAAAA,UAAU,EAAVA,UAFmB;AAGnBC,MAAAA,SAAS,EAATA;AAHmB,KAAf;AALe,GAAX,CAAL,CAUJR,IAVI,CAUC,UAAAC,GAAG;AAAA,WAAIc,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAJ;AAAA,GAVJ,CAAP;AAWD;AAED,OAAO,SAASC,YAAT,CAAsBZ,MAAtB,EAA8B;AAAA,MAC3BF,EAD2B,GACGE,MADH,CAC3BF,EAD2B;AAAA,MACvBG,UADuB,GACGD,MADH,CACvBC,UADuB;AAAA,MACXC,SADW,GACGF,MADH,CACXE,SADW;;AAEnC,MAAI,CAACJ,EAAL,EAAS;AACPK,IAAAA,KAAK,CAAC,oBAAD,CAAL;AACA;AACD;;AACD,MAAI,CAACF,UAAD,IAAe,CAACC,SAApB,EAA+B;AAC7BC,IAAAA,KAAK,CAAC,kDAAD,CAAL;AACA;AACD;;AAEDZ,EAAAA,OAAO,CAACC,GAAR,CAAY;AACVS,IAAAA,UAAU,EAAVA,UADU;AAEVC,IAAAA,SAAS,EAATA;AAFU,GAAZ;AAIA,MAAMZ,QAAQ,GAAGF,QAAQ,gCAAyBU,EAAzB,CAAzB;AACAP,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAhBmC,CAiBnC;;AACA,SAAOC,KAAK,CAACH,QAAD,EAAW;AACrBc,IAAAA,MAAM,EAAE,MADa;AAErBC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFY;AAKrBC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBP,MAAAA,UAAU,EAAVA,UADmB;AAEnBC,MAAAA,SAAS,EAATA;AAFmB,KAAf;AALe,GAAX,CAAL,CAUJR,IAVI,CAUC,UAAAC,GAAG,EAAI;AACXJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACD,GAZI,EAaJD,IAbI,CAaC,UAAAC,GAAG;AAAA,WAAIc,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAJ;AAAA,GAbJ,CAAP;AAcD;AAED,OAAO,SAASE,YAAT,CAAsBf,EAAtB,EAA0B;AAC/B,MAAMR,QAAQ,GAAGF,QAAQ,gCAAyBU,EAAzB,CAAzB;AACAP,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,SAAOC,KAAK,CAACH,QAAD,EAAW;AACrBc,IAAAA,MAAM,EAAE;AADa,GAAX,CAAL,CAEJV,IAFI,CAEC,UAAAC,GAAG;AAAA,WAAIc,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAAJ;AAAA,GAFJ,CAAP;AAGD;AAED,OAAO,SAASG,UAAT,GAAsB;AAAA,kBACG5B,QAAQ,CAAC,IAAD,CADX;AAAA;AAAA,MACpB6B,OADoB;AAAA,MACXC,UADW;;AAAA,mBAEG9B,QAAQ,CAAC,EAAD,CAFX;AAAA;AAAA,MAEpB+B,OAFoB;AAAA,MAEXC,UAFW;;AAAA,mBAGDhC,QAAQ,CAAC,IAAD,CAHP;AAAA;AAAA,MAGpBiC,KAHoB;AAAA,MAGbC,QAHa;;AAK3BjC,EAAAA,SAAS,CAAC,YAAM;AACdE,IAAAA,UAAU,GACPK,IADH,CACQ,UAAAuB,OAAO,EAAI;AACfC,MAAAA,UAAU,CAACD,OAAD,CAAV;AACAD,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAJH,EAKGK,KALH,CAKS,UAAAC,CAAC,EAAI;AACV/B,MAAAA,OAAO,CAACC,GAAR,CAAY8B,CAAZ;AACAF,MAAAA,QAAQ,CAACE,CAAD,CAAR;AACAN,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KATH;AAUD,GAXQ,EAWN,EAXM,CAAT;AAaA,SAAO;AACLD,IAAAA,OAAO,EAAPA,OADK;AAELE,IAAAA,OAAO,EAAPA,OAFK;AAGLE,IAAAA,KAAK,EAALA;AAHK,GAAP;AAKD","sourcesContent":["import { useState, useEffect } from \"react\";\n\nconst BASE_URL = \"http://localhost:3000\";\n\nfunction getAuthors() {\n  const endpoint = BASE_URL + `/author-management`;\n  console.log(\"getAuthors\");\n  return fetch(endpoint).then(res => res.json());\n}\n\nexport function getAuthor(id) {\n  const endpoint = BASE_URL + `/author-management/${id}`;\n  console.log(\"getAuthor\");\n  return fetch(endpoint).then(res => {\n    console.log(res);\n  });\n}\n\nexport function addAuthor(author) {\n  const { id, first_name, last_name } = author;\n  if (!id || !first_name || !last_name) {\n    alert(\"must include all fields\");\n    return;\n  }\n\n  console.log({\n    first_name,\n    last_name\n  });\n  const endpoint = BASE_URL + `/author-management/`;\n  console.log(\"addAuthor\");\n  // console.log(author);\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      id,\n      first_name,\n      last_name\n    })\n  }).then(res => window.location.reload());\n}\n\nexport function updateAuthor(author) {\n  const { id, first_name, last_name } = author;\n  if (!id) {\n    alert(\"must include an id\");\n    return;\n  }\n  if (!first_name || !last_name) {\n    alert(\"must include a first name or last name to update\");\n    return;\n  }\n\n  console.log({\n    first_name,\n    last_name\n  });\n  const endpoint = BASE_URL + `/author-management/${id}`;\n  console.log(\"updateAuthor\");\n  // console.log(author);\n  return fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      first_name,\n      last_name\n    })\n  })\n    .then(res => {\n      console.log(res);\n    })\n    .then(res => window.location.reload());\n}\n\nexport function deleteAuthor(id) {\n  const endpoint = BASE_URL + `/author-management/${id}`;\n  console.log(\"deleteAuthor\");\n  return fetch(endpoint, {\n    method: \"DELETE\"\n  }).then(res => window.location.reload());\n}\n\nexport function useAuthors() {\n  const [loading, setLoading] = useState(true);\n  const [authors, setAuthors] = useState([]);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    getAuthors()\n      .then(authors => {\n        setAuthors(authors);\n        setLoading(false);\n      })\n      .catch(e => {\n        console.log(e);\n        setError(e);\n        setLoading(false);\n      });\n  }, []);\n\n  return {\n    loading,\n    authors,\n    error\n  };\n}\n"]},"metadata":{},"sourceType":"module"}